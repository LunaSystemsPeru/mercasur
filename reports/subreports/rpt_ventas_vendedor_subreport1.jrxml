<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rpt_ventas_vendedor_subreport1" language="groovy" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="71d88b6c-e989-4b57-b69f-84921a07781b">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="p_id_empleado" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="p_id_zona" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
     productos.`descripcion` AS productos_descripcion,
     sum(detalle_venta.`cantidad`) AS detalle_venta_cantidad,
     detalle_venta.`precio` AS detalle_venta_precio,
     detalle_venta.`id_venta` AS detalle_venta_id_venta,
     detalle_venta.`periodo` AS detalle_venta_periodo,
     detalle_venta.`id_producto` AS detalle_venta_id_producto,
     ventas.`id_zona` AS ventas_id_zona,
     ventas.`id_empleado` AS ventas_id_empleado
FROM
     `productos` productos INNER JOIN `detalle_venta` detalle_venta ON productos.`id_producto` = detalle_venta.`id_producto`
     INNER JOIN `ventas` ventas ON detalle_venta.`periodo` = ventas.`periodo`
     AND ventas.`id_venta` = detalle_venta.`id_venta`
where  ventas.id_zona = $P{p_id_zona} and ventas.id_empleado = $P{p_id_empleado}
group by detalle_venta.id_producto]]>
	</queryString>
	<field name="productos_descripcion" class="java.lang.String"/>
	<field name="detalle_venta_cantidad" class="java.math.BigDecimal"/>
	<field name="detalle_venta_precio" class="java.math.BigDecimal"/>
	<field name="detalle_venta_id_venta" class="java.lang.Integer"/>
	<field name="detalle_venta_periodo" class="java.lang.String"/>
	<field name="detalle_venta_id_producto" class="java.lang.Integer"/>
	<field name="ventas_id_zona" class="java.lang.Integer"/>
	<field name="ventas_id_empleado" class="java.lang.Integer"/>
	<variable name="Subtotal" class="java.lang.Double">
		<variableExpression><![CDATA[$F{detalle_venta_cantidad} * $F{detalle_venta_precio}]]></variableExpression>
	</variable>
	<variable name="total" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{detalle_venta_cantidad} * $F{detalle_venta_precio}]]></variableExpression>
	</variable>
	<group name="detalle_venta_precio">
		<groupExpression><![CDATA[$F{detalle_venta_precio}]]></groupExpression>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<columnHeader>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="313" height="20" uuid="562d0165-c2a2-4a2f-bf08-8c8d1caefc5e"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[descripcion]]></text>
			</staticText>
			<staticText>
				<reportElement x="328" y="0" width="71" height="20" uuid="44bb5810-00fb-4875-8d12-1f0beeefdef7"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[cantidad]]></text>
			</staticText>
			<staticText>
				<reportElement x="399" y="0" width="71" height="20" uuid="ca936591-725c-4baf-bc36-3ab65055bc48"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[precio]]></text>
			</staticText>
			<staticText>
				<reportElement x="455" y="0" width="85" height="20" uuid="ab7147e2-aca0-4fd7-80bb-909da3cd835b"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[Subtotal]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="60" y="0" width="253" height="20" uuid="4e9df89f-9cbb-4f5e-964b-39222869ec8f"/>
				<textFieldExpression><![CDATA[$F{productos_descripcion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="336" y="0" width="63" height="20" uuid="0053eb29-1ba9-4156-97a2-03f633311bf3"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{detalle_venta_cantidad}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="399" y="0" width="71" height="20" uuid="fe228600-2e58-42e3-91a7-a4228a3078ef"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{detalle_venta_precio}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00">
				<reportElement x="470" y="0" width="70" height="20" uuid="2f8a0c6e-553e-46bc-a655-9e6d77b90611"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$V{Subtotal}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="470" y="0" width="70" height="20" uuid="288786c3-9a9e-4fa2-9b96-810bf2f739db"/>
				<textFieldExpression><![CDATA[$V{total}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="407" y="0" width="63" height="20" uuid="ca79cba1-947c-4d87-80e9-05783cc0af8c"/>
				<text><![CDATA[Total]]></text>
			</staticText>
		</band>
	</columnFooter>
</jasperReport>
